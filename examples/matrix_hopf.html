<!DOCTYPE html>
<html><head>
<meta charset=utf-8>
<title>Planets</title>
<style>
body { margin: 0; }
canvas { width: 100%; height: 100% }
</style>
</head>
<body>
<script src="three.js/build/three.js"></script>
<script src="three.js/examples/js/controls/OrbitControls.js"></script>
<script src="../loader/ColladaLoader.js"></script>
<script>
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
//scene.background = new THREE.Color( 0xffffff );
    
camera.position.set(0,0,5);
var ambLight = new THREE.AmbientLight(0x3e3e3e3e); //0x3e3e3e3e
scene.add(ambLight);

var renderer = new THREE.WebGLRenderer();
var controls = new THREE.OrbitControls( camera, renderer.domElement );
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

/*
var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
var cube1 = new THREE.Mesh( geometry, material );
scene.add( cube1 );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( { color: 0x0000ff } );
var cube2 = new THREE.Mesh( geometry, material );
cube2.position.set (5, 0, 0);
cube1.add( cube2 );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
var cube3 = new THREE.Mesh( geometry, material );
cube3.position.set (2, 0, 0);
cube2.add( cube3 );

*/

var objects = [];
    
var group1   = new THREE.Group();
scene.add( group1 );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
var cube1 = new THREE.Mesh( geometry, material );
group1.add( cube1 );

var group2  = new THREE.Group();
group2.position.set (5, 0, 0);
group1.add( group2 );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( {"color": "rgb(0,0,255)"} );
var cube2 = new THREE.Mesh( geometry, material );
group2.add( cube2 );

var group3  = new THREE.Group();
group3.position.set (2, 0, 0);
group2.add( group3 );

var geometry = new THREE.BoxGeometry( 1, 1, 1 );
var material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
var cube3 = new THREE.Mesh( geometry, material );
group3.add( cube3 );
    
//navball
var loader = new THREE.TextureLoader();
var nav_geometry = new THREE.SphereGeometry( .5, 32, 32 );
var nav_material = new THREE.MeshBasicMaterial( {color: 0xffffff} );
nav_material.map = loader.load("../textures/navball.png");
var sphere_nav = new THREE.Mesh( nav_geometry, nav_material );
scene.add(camera);
camera.add(sphere_nav);
sphere_nav.position.set(0,-1,-2);
    

//placeLaunchpad();
    
function placeLaunchpad() {
        var loader = new THREE.ColladaLoader(); 
        loader.options.convertUpAxis = true; 
        loader.load("../models/saturnV.dae", function(collada) {
            launchpadGroup = new THREE.Group();
            launchpad = collada.scene;   //var skin = collada.skins[ 0 ];
            launchpad.scale.set(1e10, 1e10, 1e10);
            launchpadGroup.add(launchpad);
            /*launchpadGroup.position.x = spaceObjects.earth.radius; //0.1
            launchpadGroup.position.y = spaceObjects.earth.radius * 0.5;
            launchpadGroup.position.z = spaceObjects.earth.radius * 0.9;*/
            //launchpad.rotateX(Math.PI/180 * 60);
            //spaceObjects.sun.group.add(launchpadGroup);
            launchpadGroup.position.set(1e31,0,0);
            scene.add(launchpadGroup);
        });
    }    
    
    
//test text
/*var canvas = document.createElement('canvas');
canvas.width = 512;
canvas.height = 512;
var context = canvas.getContext('2d');
context.font = "196px Arial";
context.fillStyle = "rgba(255,0,0,1)";
context.fillText('Earth!', 0, 256);
var tex = new THREE.Texture(canvas);
tex.needsUpdate = true;
var mate = new THREE.SpriteMaterial( { map: tex, color: 0xffffff } );
var sprite = new THREE.Sprite( mate );
sprite.position.set(0,2,0);
<<<<<<< HEAD
cube2.add( sprite );
    
//Test with texture
        var path = "textures/earth_label.png";
        var map = new THREE.TextureLoader().load(path);
        var material = new THREE.SpriteMaterial( { map: map, color: 0xffffff} );
        var sprite = new THREE.Sprite( material );
        //sprite.scale.set(1e11, 1e11, 1e11);
        sprite.position.set(0,2,0)
        //group1.add( sprite );

//test with LOD
    
        var dotGeometry = new THREE.Geometry();
        dotGeometry.vertices.push(new THREE.Vector3( 0, 3, 0));
        var loader = new THREE.TextureLoader();
        var material_point = new THREE.PointsMaterial({color:0xffffff, size:512, sizeAttenuation:false, map: loader.load("textures/labels/earth_label.png")});
        material_point.transparent = true;
        var mesh_point = new THREE.Points(dotGeometry,  material_point);
        //mesh_point.scale.set(3, 0, 0);
        
        group1.add( mesh_point );
=======
sprite.scale.set(5,5,5);
group2.add( sprite );*/

/*var map = new THREE.TextureLoader().load("textures/test/xneg.png");
var mate = new THREE.SpriteMaterial( { map: map, color: 0xffffff } );
var sprite = new THREE.Sprite( mate );
sprite.position.set(0,2,0);
sprite.scale.set(1e10,1e10,1e10);
group2.add(sprite);

camera.position.z = 8;

//picking stuff
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();
document.addEventListener( 'click', onMouseMove, false );
objects.push(cube1);
objects.push(cube2);
objects.push(cube3);
console.log(objects);*/
    

function onMouseMove( event ) {
    event.preventDefault();
    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
	mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
    raycaster.setFromCamera( mouse, camera );
    var intersects = raycaster.intersectObjects( objects );
    for ( var i = 0; i < intersects.length; i++ ) {
        camera.position.x = intersects[i].object.position.x;
        camera.position.y = intersects[i].object.position.y;
        camera.position.z = intersects[i].object.position.z+3;
		intersects[ i ].object.material.color.set( 0xff0000 );
	}
}
    
function render() {
    requestAnimationFrame( render );
    cube1.rotateY (.0009);
    group1.rotateY (.02);
    cube2.rotateY (.3);
    group2.rotateY (.05);
    cube3.rotateY (.1);
    renderer.render( scene, camera );
}
render();
</script>
</body></html>
